{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\huber\\\\Documents\\\\Source\\\\Proyectos\\\\KeepCoding\\\\React_Avanzado\\\\react-practica-main\\\\react-practica\\\\src\\\\components\\\\adverts\\\\AdvertForm.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Select from 'react-select';\nimport { createAdvert, getTags } from '../../api/adverts';\nimport { MDBInput, MDBBtn } from 'mdb-react-ui-kit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdvertForm = () => {\n  _s();\n  const [name, setName] = useState('');\n  const [sale, setSale] = useState(false);\n  const [price, setPrice] = useState('');\n  const [tags, setTags] = useState([]);\n  const [selectedTags, setSelectedTags] = useState([]);\n  const [photo, setPhoto] = useState(null);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchTags = async () => {\n      try {\n        const data = await getTags();\n        setTags(data.map(tag => ({\n          label: tag,\n          value: tag\n        })));\n      } catch (error) {\n        console.error('Error al obtener los tags:', error);\n      }\n    };\n    fetchTags();\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!name || !price || selectedTags.length === 0) {\n      setError('Por favor, completa todos los campos obligatorios');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('sale', sale);\n    formData.append('price', price);\n    formData.append('tags', selectedTags.map(tag => tag.value));\n    if (photo) {\n      formData.append('photo', photo);\n    }\n    try {\n      const advert = await createAdvert(formData);\n      navigate(`/adverts/${advert.id}`);\n    } catch (error) {\n      console.error('Error al crear el anuncio:', error);\n      setError('Error al crear el anuncio');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(MDBInput, {\n      label: \"Nombre\",\n      type: \"text\",\n      value: name,\n      onChange: e => setName(e.target.value),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"select\",\n      value: sale,\n      onChange: e => setSale(e.target.value === 'true'),\n      required: true,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"false\",\n        children: \"Compra\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"true\",\n        children: \"Venta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n      label: \"Precio\",\n      type: \"number\",\n      value: price,\n      onChange: e => setPrice(e.target.value),\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Etiquetas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        isMulti: true,\n        options: tags,\n        value: selectedTags,\n        onChange: setSelectedTags,\n        className: \"basic-multi-select\",\n        classNamePrefix: \"select\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Foto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: e => setPhoto(e.target.files[0])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n      type: \"submit\",\n      disabled: !name || !price || selectedTags.length === 0,\n      children: \"Crear anuncio\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(AdvertForm, \"hrkpsf3r6HiXLWfM6SLSCuiLa0s=\", false, function () {\n  return [useNavigate];\n});\n_c = AdvertForm;\nexport default AdvertForm;\nvar _c;\n$RefreshReg$(_c, \"AdvertForm\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Select","createAdvert","getTags","MDBInput","MDBBtn","jsxDEV","_jsxDEV","AdvertForm","_s","name","setName","sale","setSale","price","setPrice","tags","setTags","selectedTags","setSelectedTags","photo","setPhoto","error","setError","navigate","fetchTags","data","map","tag","label","value","console","handleSubmit","e","preventDefault","length","formData","FormData","append","advert","id","onSubmit","className","children","type","onChange","target","required","fileName","_jsxFileName","lineNumber","columnNumber","isMulti","options","classNamePrefix","accept","files","disabled","_c","$RefreshReg$"],"sources":["C:/Users/huber/Documents/Source/Proyectos/KeepCoding/React_Avanzado/react-practica-main/react-practica/src/components/adverts/AdvertForm.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Select from 'react-select';\nimport { createAdvert, getTags } from '../../api/adverts';\nimport { MDBInput, MDBBtn } from 'mdb-react-ui-kit';\n\nconst AdvertForm = () => {\n  const [name, setName] = useState('');\n  const [sale, setSale] = useState(false);\n  const [price, setPrice] = useState('');\n  const [tags, setTags] = useState([]);\n  const [selectedTags, setSelectedTags] = useState([]);\n  const [photo, setPhoto] = useState(null);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchTags = async () => {\n      try {\n        const data = await getTags();\n        setTags(data.map((tag) => ({ label: tag, value: tag })));\n      } catch (error) {\n        console.error('Error al obtener los tags:', error);\n      }\n    };\n\n    fetchTags();\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!name || !price || selectedTags.length === 0) {\n      setError('Por favor, completa todos los campos obligatorios');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('sale', sale);\n    formData.append('price', price);\n    formData.append(\n      'tags',\n      selectedTags.map((tag) => tag.value)\n    );\n    if (photo) {\n      formData.append('photo', photo);\n    }\n\n    try {\n      const advert = await createAdvert(formData);\n      navigate(`/adverts/${advert.id}`);\n    } catch (error) {\n      console.error('Error al crear el anuncio:', error);\n      setError('Error al crear el anuncio');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"container mt-5\">\n      <MDBInput\n        label=\"Nombre\"\n        type=\"text\"\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n        required\n      />\n\n      <select\n        className=\"select\"\n        value={sale}\n        onChange={(e) => setSale(e.target.value === 'true')}\n        required\n      >\n        <option value=\"false\">Compra</option>\n        <option value=\"true\">Venta</option>\n      </select>\n\n      <MDBInput\n        label=\"Precio\"\n        type=\"number\"\n        value={price}\n        onChange={(e) => setPrice(e.target.value)}\n        required\n      />\n\n      <div>\n        <label>Etiquetas</label>\n        <Select\n          isMulti\n          options={tags}\n          value={selectedTags}\n          onChange={setSelectedTags}\n          className=\"basic-multi-select\"\n          classNamePrefix=\"select\"\n          required\n        />\n      </div>\n\n      <div>\n        <label>Foto</label>\n        <input\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={(e) => setPhoto(e.target.files[0])}\n        />\n      </div>\n\n      {error && <div className=\"text-danger\">{error}</div>}\n\n      <MDBBtn\n        type=\"submit\"\n        disabled={!name || !price || selectedTags.length === 0}\n      >\n        Crear anuncio\n      </MDBBtn>\n    </form>\n  );\n};\n\nexport default AdvertForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}