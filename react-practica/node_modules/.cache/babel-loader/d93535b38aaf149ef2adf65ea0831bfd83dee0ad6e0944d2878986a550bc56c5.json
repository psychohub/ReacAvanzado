{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { loginUser } from '../api/auth';\n\n// Thunk asíncrono para manejar el inicio de sesión\nexport const login = createAsyncThunk('auth/login', async ({\n  email,\n  password,\n  rememberMe\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await loginUser({\n      email,\n      password\n    });\n    const {\n      accessToken\n    } = response;\n    if (accessToken) {\n      if (rememberMe) {\n        localStorage.setItem('token', accessToken);\n      }\n      return accessToken;\n    }\n    return rejectWithValue('No access token received');\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\n\n// Slice para la sesión de usuario\nconst userSlice = createSlice({\n  name: 'auth',\n  initialState: {\n    isAuthenticated: !!localStorage.getItem('token'),\n    user: localStorage.getItem('token') ? {\n      token: localStorage.getItem('token')\n    } : null,\n    status: 'idle',\n    error: null\n  },\n  reducers: {\n    logout(state) {\n      state.isAuthenticated = false;\n      state.user = null;\n      localStorage.removeItem('token');\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(login.pending, state => {\n      state.status = 'loading';\n    }).addCase(login.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      state.isAuthenticated = true;\n      state.user = {\n        token: action.payload\n      };\n    }).addCase(login.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  logout\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","loginUser","login","email","password","rememberMe","rejectWithValue","response","accessToken","localStorage","setItem","error","data","userSlice","name","initialState","isAuthenticated","getItem","user","token","status","reducers","logout","state","removeItem","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/huber/Documents/Source/Proyectos/KeepCoding/React_Avanzado/react-practica-main/react-practica/src/redux/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { loginUser } from '../api/auth';\n\n// Thunk asíncrono para manejar el inicio de sesión\nexport const login = createAsyncThunk(\n  'auth/login',\n  async ({ email, password, rememberMe }, { rejectWithValue }) => {\n    try {\n      const response = await loginUser({ email, password });\n      const { accessToken } = response;\n      if (accessToken) {\n        if (rememberMe) {\n          localStorage.setItem('token', accessToken);\n        }\n        return accessToken;\n      }\n      return rejectWithValue('No access token received');\n    } catch (error) {\n      return rejectWithValue(error.response.data);\n    }\n  }\n);\n\n// Slice para la sesión de usuario\nconst userSlice = createSlice({\n  name: 'auth',\n  initialState: {\n    isAuthenticated: !!localStorage.getItem('token'),\n    user: localStorage.getItem('token')\n      ? { token: localStorage.getItem('token') }\n      : null,\n    status: 'idle',\n    error: null,\n  },\n  reducers: {\n    logout(state) {\n      state.isAuthenticated = false;\n      state.user = null;\n      localStorage.removeItem('token');\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(login.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.isAuthenticated = true;\n        state.user = { token: action.payload };\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.status = 'failed';\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { logout } = userSlice.actions;\nexport default userSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,SAASC,SAAS,QAAQ,aAAa;;AAEvC;AACA,OAAO,MAAMC,KAAK,GAAGF,gBAAgB,CACnC,YAAY,EACZ,OAAO;EAAEG,KAAK;EAAEC,QAAQ;EAAEC;AAAW,CAAC,EAAE;EAAEC;AAAgB,CAAC,KAAK;EAC9D,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMN,SAAS,CAAC;MAAEE,KAAK;MAAEC;IAAS,CAAC,CAAC;IACrD,MAAM;MAAEI;IAAY,CAAC,GAAGD,QAAQ;IAChC,IAAIC,WAAW,EAAE;MACf,IAAIH,UAAU,EAAE;QACdI,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,WAAW,CAAC;MAC5C;MACA,OAAOA,WAAW;IACpB;IACA,OAAOF,eAAe,CAAC,0BAA0B,CAAC;EACpD,CAAC,CAAC,OAAOK,KAAK,EAAE;IACd,OAAOL,eAAe,CAACK,KAAK,CAACJ,QAAQ,CAACK,IAAI,CAAC;EAC7C;AACF,CACF,CAAC;;AAED;AACA,MAAMC,SAAS,GAAGd,WAAW,CAAC;EAC5Be,IAAI,EAAE,MAAM;EACZC,YAAY,EAAE;IACZC,eAAe,EAAE,CAAC,CAACP,YAAY,CAACQ,OAAO,CAAC,OAAO,CAAC;IAChDC,IAAI,EAAET,YAAY,CAACQ,OAAO,CAAC,OAAO,CAAC,GAC/B;MAAEE,KAAK,EAAEV,YAAY,CAACQ,OAAO,CAAC,OAAO;IAAE,CAAC,GACxC,IAAI;IACRG,MAAM,EAAE,MAAM;IACdT,KAAK,EAAE;EACT,CAAC;EACDU,QAAQ,EAAE;IACRC,MAAMA,CAACC,KAAK,EAAE;MACZA,KAAK,CAACP,eAAe,GAAG,KAAK;MAC7BO,KAAK,CAACL,IAAI,GAAG,IAAI;MACjBT,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;IAClC;EACF,CAAC;EACDC,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACzB,KAAK,CAAC0B,OAAO,EAAGL,KAAK,IAAK;MACjCA,KAAK,CAACH,MAAM,GAAG,SAAS;IAC1B,CAAC,CAAC,CACDO,OAAO,CAACzB,KAAK,CAAC2B,SAAS,EAAE,CAACN,KAAK,EAAEO,MAAM,KAAK;MAC3CP,KAAK,CAACH,MAAM,GAAG,WAAW;MAC1BG,KAAK,CAACP,eAAe,GAAG,IAAI;MAC5BO,KAAK,CAACL,IAAI,GAAG;QAAEC,KAAK,EAAEW,MAAM,CAACC;MAAQ,CAAC;IACxC,CAAC,CAAC,CACDJ,OAAO,CAACzB,KAAK,CAAC8B,QAAQ,EAAE,CAACT,KAAK,EAAEO,MAAM,KAAK;MAC1CP,KAAK,CAACH,MAAM,GAAG,QAAQ;MACvBG,KAAK,CAACZ,KAAK,GAAGmB,MAAM,CAACC,OAAO;IAC9B,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAET;AAAO,CAAC,GAAGT,SAAS,CAACoB,OAAO;AAC3C,eAAepB,SAAS,CAACqB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}